<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NPS Parks Comparison</title>
    <!-- Include Chart.js from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Create a canvas element for the bar graph -->
    <canvas id="myBarChart" width="400" height="400"></canvas>

    <script>
        // Check if Chart is defined (for troubleshooting)
        if (typeof Chart !== 'undefined') {
            // API endpoints for park data
            var apiEndpoints = [
                'https://developer.nps.gov/api/v1/parks?parkCode=sagu&api_key=479HXbPsSqNacjdnouvPQi4c0tIkAmtjTd0cSHrS',
                'https://developer.nps.gov/api/v1/parks?parkCode=pefo&api_key=479HXbPsSqNacjdnouvPQi4c0tIkAmtjTd0cSHrS',
                'https://developer.nps.gov/api/v1/parks?parkCode=grca&api_key=479HXbPsSqNacjdnouvPQi4c0tIkAmtjTd0cSHrS'
            ];

            // Function to fetch data from API
            async function fetchData(apiEndpoint) {
                const response = await fetch(apiEndpoint);
                const data = await response.json();
                return data;
            }

            // Fetch data from each API endpoint
            Promise.all(apiEndpoints.map(fetchData))
                .then(dataArray => {
                    // Extract relevant data for the bar graph
                    var labels = dataArray.map(data => data.data[0].fullName);
                    var activitiesData = dataArray.map(data => data.data[0].activities.length);

                    // Bar graph data
                    var data = {
                        labels: labels,
                        datasets: [{
                            label: 'Activities Count',
                            backgroundColor: 'rgba(75, 192, 192, 0.2)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1,
                            data: activitiesData
                        }]
                    };

                    // Configuration options for the bar graph
                    var options = {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    };

                    // Get the canvas element and render the bar graph
                    var ctx = document.getElementById('myBarChart').getContext('2d');
                    var myBarChart = new Chart(ctx, {
                        type: 'bar',
                        data: data,
                        options: options
                    });
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        } else {
            // Chart.js is not defined
            console.error('Chart.js is not loaded. Please check your script inclusion.');
        }
    </script>
</body>
</html>
